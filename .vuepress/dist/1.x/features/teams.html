<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Teams | Laravel Jetstream</title>
    <meta name="description" content="Beautifully designed application scaffolding for Laravel">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,800,800i,900,900i" rel="stylesheet" type="text/css">
    
    <link rel="preload" href="/assets/css/0.styles.2f44c217.css" as="style"><link rel="preload" href="/assets/js/app.9a8af451.js" as="script"><link rel="preload" href="/assets/js/2.17bf1b77.js" as="script"><link rel="preload" href="/assets/js/9.48587324.js" as="script"><link rel="prefetch" href="/assets/js/10.ccc0bdfd.js"><link rel="prefetch" href="/assets/js/11.c83ad1c7.js"><link rel="prefetch" href="/assets/js/12.0f203b01.js"><link rel="prefetch" href="/assets/js/13.7cac3857.js"><link rel="prefetch" href="/assets/js/14.f75ae5b9.js"><link rel="prefetch" href="/assets/js/15.7b9a5b52.js"><link rel="prefetch" href="/assets/js/16.89a1b5d4.js"><link rel="prefetch" href="/assets/js/3.72ab365a.js"><link rel="prefetch" href="/assets/js/4.732edc56.js"><link rel="prefetch" href="/assets/js/5.0dc621ca.js"><link rel="prefetch" href="/assets/js/6.9c848014.js"><link rel="prefetch" href="/assets/js/7.36c44471.js"><link rel="prefetch" href="/assets/js/8.0774ba4d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2f44c217.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.svg" alt="Laravel Jetstream" class="logo"> <span class="site-name can-hide">Laravel Jetstream</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://jetstream.laravel.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/laravel/jetstream" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://jetstream.laravel.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/laravel/jetstream" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.x/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/1.x/installation.html" class="sidebar-link">Installation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Features</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.x/features/api.html" class="sidebar-link">API</a></li><li><a href="/1.x/features/teams.html" class="active sidebar-link">Teams</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Stacks</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.x/stacks/livewire.html" class="sidebar-link">Livewire</a></li><li><a href="/1.x/stacks/inertia.html" class="sidebar-link">Inertia</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="teams"><a href="#teams" class="header-anchor">#</a> Teams</h1> <p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a><ul><li><a href="#current-team">Current Team</a></li><li><a href="#member-management">Member Management</a></li><li><a href="#roles-permissions">Roles / Permissions</a></li><li><a href="#authorization">Authorization</a></li></ul></li></ul></div><p></p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>If you installed Jetstream using the <code>teams</code> option, your application will be scaffolded to support team creation and management. By default, every registered user will belong to a <code>Personal</code> team. After registration, the user may rename this team or create additional teams.</p> <p>Team creation and deletion logic may be customized by modifying the relevant action classes within your <code>app/Actions/Jetstream</code> directory. These actions include <code>CreateTeam</code>, <code>UpdateTeamName</code>, and <code>DeleteTeam</code>.</p> <p>Information about a user's teams may be accessed via the methods provided by the <code>Laravel\Jetstream\HasTeams</code> trait. This trait is automatically applied to your application's <code>User</code> model:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Access a user's currently selected team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">currentTeam</span> <span class="token punctuation">:</span> Laravel\<span class="token package">Jetstream<span class="token punctuation">\</span>Team</span>

<span class="token comment">// Access all of the team's (including owned teams) that a user belongs to...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allTeams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Support<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Access all of a user's owned teams...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">ownedTeams</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Access all of the teams that a user belongs to but does not own...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">teams</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Access a user's &quot;personal&quot; team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">personalTeam</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> Laravel\<span class="token package">Jetstream<span class="token punctuation">\</span>Team</span>

<span class="token comment">// Determine if a user owns a given team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ownsTeam</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool

<span class="token comment">// Determine if a user belongs to a given team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToTeam</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool

<span class="token comment">// Access an array of all permissions a user has for a given team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">teamPermissions</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">array</span>

<span class="token comment">// Determine if a user has a given team permission...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasTeamPermission</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'server:create'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool
</code></pre></div><h3 id="current-team"><a href="#current-team" class="header-anchor">#</a> Current Team</h3> <p>Every user within Jetstream has a &quot;current team&quot;. This is the team that the user is actively viewing resources for. For example, if you are building a calendar application, your application would display the upcoming calendar events for the user's current team.</p> <p>You may access the user's current team using the <code>$user-&gt;currentTeam</code> Eloquent relationship. This team may be used to scope your other Eloquent queries by the team.</p> <p>A user may switch their current team via the user profile dropdown menu available within the Jetstream navigation bar.</p> <h3 id="member-management"><a href="#member-management" class="header-anchor">#</a> Member Management</h3> <p>Team members may be added and removed via Jetstream's &quot;Team Settings&quot; view. The backend logic that manages these actions may be customized by modifying the relevant actions, such as <code>AddTeamMember</code>, within the <code>app/Actions/Jetstream</code> directory.</p> <h3 id="roles-permissions"><a href="#roles-permissions" class="header-anchor">#</a> Roles / Permissions</h3> <p>Each team member added to a team is assigned a given role, and each role is assigned a set of permissions. Role permissions are defined in your application's <code>JetstreamServiceProvider</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Jetstream<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">defaultApiTokenPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'read'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Jetstream<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">role</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Administrator'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'create'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'read'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'update'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'delete'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Administrator users can perform any action.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Jetstream<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">role</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'editor'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Editor'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'read'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'create'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'update'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Editor users have the ability to read, create, and update.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Team API Support</p> <p>When Jetstream is installed with team support, available API permissions are automatically derived by combining all unique permissions available to roles.</p></div> <h3 id="authorization"><a href="#authorization" class="header-anchor">#</a> Authorization</h3> <p>A user's team permissions may be determined using the <code>hasTeamPermission</code> method available via the <code>Laravel\Jetstream\HasTeams</code> trait:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasTeamPermission</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'read'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="combining-team-permissions-with-api-permissions"><a href="#combining-team-permissions-with-api-permissions" class="header-anchor">#</a> Combining Team Permissions With API Permissions</h4> <p>When building a Jetstream application that utilizes API support and team support, you should verify an incoming request's team permissions and API token permissions within your authorization policies. This important because an API token may have the theoretical ability to perform an action while a user does not actually have that action granted to them via their team permissions:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Determine whether the user can view a flight.
 *
 * @param  \App\Models\User  $user
 * @param  \App\Models\Flight  $flight
 * @return bool
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">view</span><span class="token punctuation">(</span>User <span class="token variable">$user</span><span class="token punctuation">,</span> Flight <span class="token variable">$flight</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToTeam</span><span class="token punctuation">(</span><span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">team</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
           <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasTeamPermission</span><span class="token punctuation">(</span><span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">team</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'flight:view'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
           <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tokenCan</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'flight:view'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/laravel/jetstream-docs/edit/master/1.x/features/teams.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/9/2020, 8:33:52 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/1.x/features/api.html" class="prev">
        API
      </a></span> <span class="next"><a href="/1.x/stacks/livewire.html">
        Livewire
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9a8af451.js" defer></script><script src="/assets/js/2.17bf1b77.js" defer></script><script src="/assets/js/9.48587324.js" defer></script>
  </body>
</html>
